(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function b(){}function tt(t){return t()}function J(){return Object.create(null)}function G(t){t.forEach(tt)}function st(t){return typeof t=="function"}function et(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ct(t){return Object.keys(t).length===0}function h(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function O(){return S(" ")}function ut(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function at(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ft(t){return Array.from(t.childNodes)}function I(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function K(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Q(t,e,n){t.classList[n?"add":"remove"](e)}let z;function L(t){z=t}const A=[],Y=[],C=[],U=[],dt=Promise.resolve();let R=!1;function mt(){R||(R=!0,dt.then(nt))}function W(t){C.push(t)}const B=new Set;let H=0;function nt(){const t=z;do{for(;H<A.length;){const e=A[H];H++,L(e),ht(e.$$)}for(L(null),A.length=0,H=0;Y.length;)Y.pop()();for(let e=0;e<C.length;e+=1){const n=C[e];B.has(n)||(B.add(n),n())}C.length=0}while(A.length);for(;U.length;)U.pop()();R=!1,B.clear(),L(t)}function ht(t){if(t.fragment!==null){t.update(),G(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}const F=new Set;let k;function pt(){k={r:0,c:[],p:k}}function _t(){k.r||G(k.c),k=k.p}function N(t,e){t&&t.i&&(F.delete(t),t.i(e))}function Z(t,e,n,r){if(t&&t.o){if(F.has(t))return;F.add(t),k.c.push(()=>{F.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function gt(t){t&&t.c()}function ot(t,e,n,r){const{fragment:o,on_mount:i,on_destroy:l,after_update:m}=t.$$;o&&o.m(e,n),r||W(()=>{const a=i.map(tt).filter(st);l?l.push(...a):G(a),t.$$.on_mount=[]}),m.forEach(W)}function rt(t,e){const n=t.$$;n.fragment!==null&&(G(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(t,e){t.$$.dirty[0]===-1&&(A.push(t),mt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function it(t,e,n,r,o,i,l,m=[-1]){const a=z;L(t);const s=t.$$={fragment:null,ctx:null,props:i,update:b,not_equal:o,bound:J(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:J(),dirty:m,skip_bound:!1,root:e.target||a.$$.root};l&&l(s.root);let c=!1;if(s.ctx=n?n(t,e.props||{},(f,p,...g)=>{const M=g.length?g[0]:p;return s.ctx&&o(s.ctx[f],s.ctx[f]=M)&&(!s.skip_bound&&s.bound[f]&&s.bound[f](M),c&&yt(t,f)),p}):[],s.update(),c=!0,G(s.before_update),s.fragment=r?r(s.ctx):!1,e.target){if(e.hydrate){const f=ft(e.target);s.fragment&&s.fragment.l(f),f.forEach(T)}else s.fragment&&s.fragment.c();e.intro&&N(t.$$.fragment),ot(t,e.target,e.anchor,e.customElement),nt()}L(a)}class lt{$destroy(){rt(this,1),this.$destroy=b}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!ct(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function bt(t){let e,n;return{c(){e=y("div"),n=S(t[0])},m(r,o){v(r,e,o),h(e,n)},p(r,[o]){o&1&&I(n,r[0])},i:b,o:b,d(r){r&&T(e)}}}function q(t,e){return"0".repeat(e-t.length)+t}function V(t){let e=q(Math.floor(t%1e3/10).toString(),2);t=Math.floor(t/1e3);let n=q(Math.floor(t%60).toString(),2);t=Math.floor(t/60);let r=q((t%60).toString(),2);return t=Math.floor(t/60),`${t}:${r}:${n}.${e}`}function wt(t,e,n){let{startTime:r}=e,o=V(new Date().getTime()-r.getTime()),{updateInterval:i=50}=e;return setInterval(()=>{n(0,o=V(new Date().getTime()-r.getTime()))},i),t.$$set=l=>{"startTime"in l&&n(1,r=l.startTime),"updateInterval"in l&&n(2,i=l.updateInterval)},[o,r,i]}class St extends lt{constructor(e){super(),it(this,e,wt,bt,et,{startTime:1,updateInterval:2})}}const Tt=[{name:"Branner Hall",coords:[37.42553,-122.16283]},{name:"Wilbur Field",coords:[37.423124361772416,-122.16431887199543],threshold:180},{name:"Main Quad",coords:[37.42748275149643,-122.17025275417396]},{name:"The Oval",coords:[37.42986464063749,-122.16947271339265]},{name:"Frost Ampitheater Entrance",coords:[37.430998455185204,-122.16670399216976]},{name:"Crothers Hall",coords:[37.42556210348843,-122.1653086085956]},{name:"Stern Hall",coords:[37.424472336107904,-122.16565530784969],threshold:230},{name:"Wilbur Hall",coords:[37.42401338462797,-122.16314160470047],threshold:230},{name:"Hoover Tower Fountain",coords:[37.42834521662245,-122.16675560189806]},{name:"Roble Field",coords:[37.42635374435134,-122.17592710799053],threshold:200}],vt=20902e3;function D(t,e,n,r){const o=t*Math.PI/180,i=n*Math.PI/180,l=e*Math.PI/180,m=r*Math.PI/180,a=(o+i)/2;return vt*Math.sqrt((i-o)**2+Math.cos(a*Math.PI/180)**2*(m-l)**2)}function Mt(t){return(e,n)=>D(e.coords[0],e.coords[1],t.latitude,t.longitude)-D(n.coords[0],n.coords[1],t.latitude,t.longitude)}function Pt(t){let e,n,r;return{c(){e=y("button"),e.textContent="Start Game"},m(o,i){v(o,e,i),n||(r=ut(e,"click",t[7]),n=!0)},p:b,i:b,o:b,d(o){o&&T(e),n=!1,r()}}}function kt(t){let e,n,r,o,i,l,m,a,s,c=t[0].name+"",f,p,g,M,P,E,$,d,w;return g=new St({props:{startTime:t[2]}}),{c(){e=y("div"),n=y("p"),r=S("Goal:"),o=y("br"),i=S("Get within "),l=S(t[1]),m=S(" ft of:"),a=O(),s=y("h2"),f=S(c),p=O(),gt(g.$$.fragment),M=O(),P=y("div"),E=y("p"),$=S("Score: "),d=S(t[6]),K(n,"margin-bottom","5px"),K(s,"margin-top","5px")},m(u,_){v(u,e,_),h(e,n),h(n,r),h(n,o),h(n,i),h(n,l),h(n,m),h(e,a),h(e,s),h(s,f),v(u,p,_),ot(g,u,_),v(u,M,_),v(u,P,_),h(P,E),h(E,$),h(E,d),w=!0},p(u,_){(!w||_&2)&&I(l,u[1]),(!w||_&1)&&c!==(c=u[0].name+"")&&I(f,c);const x={};_&4&&(x.startTime=u[2]),g.$set(x),(!w||_&64)&&I(d,u[6])},i(u){w||(N(g.$$.fragment,u),w=!0)},o(u){Z(g.$$.fragment,u),w=!1},d(u){u&&T(e),u&&T(p),rt(g,u),u&&T(M),u&&T(P)}}}function Et(t){let e;return{c(){e=y("p"),e.textContent="Awaiting GPS coordinates..."},m(n,r){v(n,e,r)},p:b,i:b,o:b,d(n){n&&T(e)}}}function xt(t){let e,n;return{c(){e=y("p"),n=S(t[3])},m(r,o){v(r,e,o),h(e,n)},p(r,o){o&8&&I(n,r[3])},i:b,o:b,d(r){r&&T(e)}}}function At(t){let e,n,r,o,i,l;const m=[xt,Et,kt,Pt],a=[];function s(c,f){return c[3]?0:c[4]==="AwaitingGPS"?1:c[4]==="Playing"?2:3}return o=s(t),i=a[o]=m[o](t),{c(){e=y("main"),n=y("h1"),n.textContent="Stanford Hunt",r=O(),i.c(),at(e,"class","svelte-9xmzfe"),Q(e,"flash",t[5])},m(c,f){v(c,e,f),h(e,n),h(e,r),a[o].m(e,null),l=!0},p(c,[f]){let p=o;o=s(c),o===p?a[o].p(c,f):(pt(),Z(a[p],1,1,()=>{a[p]=null}),_t(),i=a[o],i?i.p(c,f):(i=a[o]=m[o](c),i.c()),N(i,1),i.m(e,null)),(!l||f&32)&&Q(e,"flash",c[5])},i(c){l||(N(i),l=!0)},o(c){Z(i),l=!1},d(c){c&&T(e),a[o].d()}}}const It=100;let X="Easy";function Lt(t,e,n){const r={Easy:[100,1e3],Medium:[500,3e3],Hard:[1e3,5e3]};let o=null,i,l=null,m="",a="BeforeStart",s=Tt,c=!1,f=0;function p(d){var _;console.log(d.coords);let w=s.filter(x=>{let j=D(x.coords[0],x.coords[1],d.coords.latitude,d.coords.longitude);return console.log(x.name,j),j>=r[X][0]&&j<=r[X][1]}),u;return w.length===0?u=s.sort(Mt(d.coords))[0]:u=w[Math.floor(Math.random()*w.length)],n(1,i=(_=u==null?void 0:u.threshold)!=null?_:It),u}function g(){n(4,a="AwaitingGPS"),E()}function M(d){n(6,f++,f),navigator.vibrate(100),n(5,c=!0),setTimeout(()=>{n(5,c=!1)},1e3),n(0,o=p(d)),P()}function P(){n(2,l=new Date)}function E(){if(navigator.geolocation)navigator.geolocation.watchPosition($,d=>{switch(d.code){case 1:n(3,m="This game cannot be played without GPS.");break;default:n(3,m="An error occurred while attempting to get GPS position.");break}});else return n(3,m="Your device/browser does not support GPS."),!1}function $(d){a==="AwaitingGPS"&&(n(0,o=p(d)),P(),n(4,a="Playing")),D(o.coords[0],o.coords[1],d.coords.latitude,d.coords.longitude)<=i&&M(d)}return[o,i,l,m,a,c,f,g]}class Gt extends lt{constructor(e){super(),it(this,e,Lt,At,et,{})}}new Gt({target:document.getElementById("app")});
